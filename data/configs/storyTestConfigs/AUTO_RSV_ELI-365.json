{
  "CampaignConfig": {
    "ID": "8fcb742b-45fa-4e0d-8f2f-9c2efb1f46d0",
    "Version": 1,
    "Name": "EliD RSV example config",
    "Type": "V",
    "Target": "RSV",
    "Manager": [
      "person1@nhs.net"
    ],
    "Approver": [
      "person1@nhs.net"
    ],
    "Reviewer": [
      "person1@nhs.net"
    ],
    "IterationFrequency": "X",
    "IterationType": "O",
    "IterationTime": "07:00:00",
    "StartDate": "20250717",
    "EndDate": "20350717",
    "ApprovalMinimum": 0,
    "ApprovalMaximum": 0,
    "DefaultCommsRouting": "PLACEHOLDER_COMMS_ROUTING",
    "Iterations": [
      {
        "ID": "8fcb742b-45fa-4e0d-8f2f-9c2efb1f46d1",
        "DefaultCommsRouting": "BOOK_LOCAL|HELP_SUPPORT",
        "DefaultNotActionableRouting": "",
        "DefaultNotEligibleRouting": "CHECK_CORRECT_X",
        "Version": 1,
        "Name": "EliD RSV example config",
        "IterationDate": "20250717",
        "IterationNumber": 1,
        "CommsType": "I",
        "ApprovalMinimum": 0,
        "ApprovalMaximum": 0,
        "Type": "O",
        "IterationCohorts": [
          {
            "CohortLabel": "rsv_75to79",
            "CohortGroup": "rsv_age",
            "PositiveDescription": "are aged 75 to 79 years old",
            "NegativeDescription": "are not aged 75 to 79 years old",
            "Priority": 0
          },
          {
            "CohortLabel": "rsv_80_since_02_Sept_2024",
            "CohortGroup": "rsv_age_catchup",
            "PositiveDescription": "turned 80 after 1st September 2024",
            "NegativeDescription": "did not turn 80 after 1 September 2024",
            "Priority": 10
          },
          {
            "CohortLabel": "elid_all_people",
            "CohortGroup": "magic_cohort",
            "PositiveDescription": "",
            "NegativeDescription": "",
            "Priority": 20
          }
        ],
        "IterationRules": [
          {
            "Type": "F",
            "Name": "Remove from magic cohort unless already vaccinated or have future booking",
            "Description": "Remove anyone NOT already vaccinated within the last 25 years and do not have a future booking from the magic cohort",
            "Operator": "Y<=",
            "Comparator": "-25[[NVL:18000101]]",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "LAST_SUCCESSFUL_DATE",
            "CohortLabel": "elid_all_people",
            "Priority": 100
          },
          {
            "Type": "F",
            "Name": "Remove from magic cohort unless already vaccinated or have future booking",
            "Description": "Remove anyone without a future booking from magic cohort",
            "Operator": "D<",
            "Comparator": "0[[NVL:18000101]]",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "BOOKED_APPOINTMENT_DATE",
            "CohortLabel": "elid_all_people",
            "Priority": 100
          },
          {
            "Type": "F",
            "Name": "Remove under 75 Years on day of execution",
            "Description": "Ensure anyone who has a PDS date of birth which determines their age to be less than 75 years is filtered out.",
            "Priority": 120,
            "AttributeLevel": "PERSON",
            "AttributeName": "DATE_OF_BIRTH",
            "Operator": "Y>",
            "Comparator": "-75",
            "CohortLabel": "rsv_75to79"
          },
          {
            "Type": "F",
            "Name": "Remove over 80 on day of execution",
            "Description": "Exclude anyone who turned 80 before 2nd September 2024",
            "Priority": 130,
            "AttributeLevel": "PERSON",
            "AttributeName": "DATE_OF_BIRTH",
            "Operator": "<",
            "Comparator": "19440902",
            "CohortLabel": "rsv_75to79"
          },
          {
            "Type": "F",
            "Name": "Remove under 75 Years on day of execution",
            "Description": "Ensure anyone who has a PDS date of birth which determines their age to be less than 75 years is filtered out.",
            "Priority": 140,
            "AttributeLevel": "PERSON",
            "AttributeName": "DATE_OF_BIRTH",
            "Operator": "Y>",
            "Comparator": "-75",
            "CohortLabel": "rsv_80_since_02_Sept_2024"
          },
          {
            "Type": "F",
            "Name": "Remove over 80 on day of execution",
            "Description": "Exclude anyone who turned 80 before 2nd September 2024",
            "Priority": 150,
            "AttributeLevel": "PERSON",
            "AttributeName": "DATE_OF_BIRTH",
            "Operator": "<",
            "Comparator": "19440902",
            "CohortLabel": "rsv_80_since_02_Sept_2024"
          },
          {
            "Type": "F",
            "Name": "Remove from rsv 80 cohort if already vaccinated",
            "Description": "Remove anyone already vaccinated from 80 cohort",
            "Operator": "Y>=",
            "Comparator": "-25",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "LAST_SUCCESSFUL_DATE",
            "CohortLabel": "rsv_80_since_02_Sept_2024",
            "Priority": 160
          },
          {
            "Type": "F",
            "Name": "Remove from rsv 80 cohort if future booking",
            "Description": "Remove anyone with a future booking from RSV 80 cohort",
            "Operator": "D>=",
            "Comparator": "0",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "BOOKED_APPOINTMENT_DATE",
            "CohortLabel": "rsv_80_since_02_Sept_2024",
            "Priority": 170
          },
          {
            "Type": "F",
            "Name": "Remove from rsv 75-79 cohort if already vaccinated",
            "Description": "Remove anyone already vaccinated from 75-79 cohort",
            "Operator": "Y>=",
            "Comparator": "-25",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "LAST_SUCCESSFUL_DATE",
            "CohortLabel": "rsv_75to79",
            "Priority": 180
          },
          {
            "Type": "F",
            "Name": "Remove from rsv 75-79 cohort if future booking",
            "Description": "Remove anyone with a future booking from RSV 75-79 cohort",
            "Operator": "D>=",
            "Comparator": "0",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "BOOKED_APPOINTMENT_DATE",
            "CohortLabel": "rsv_75to79",
            "Priority": 190
          },
          {
            "Type": "S",
            "Name": "Already Vaccinated",
            "Description": "## You've had your RSV vaccination\n\nWe believe you had your vaccination.",
            "Priority": 200,
            "AttributeLevel": "TARGET",
            "AttributeTarget": "RSV",
            "AttributeName": "LAST_SUCCESSFUL_DATE",
            "Operator": "Y>=",
            "Comparator": "-25",
            "RuleStop": "Y"
          },
          {
            "Type": "S",
            "Name": "Other Setting",
            "Description": "## Getting the vaccine\n\nWe believe you're living in a setting where care is provided.\n\nSpeak to a member of staff where you live about getting the RSV vaccine.",
            "Priority": 510,
            "AttributeLevel": "PERSON",
            "AttributeName": "CARE_HOME_FLAG",
            "Operator": "=",
            "Comparator": "Y",
            "CohortLabel": "rsv_80_since_02_Sept_2024",
            "RuleStop": "Y"
          },
          {
            "Type": "S",
            "Name": "Other Setting",
            "Description": "## Getting the vaccine\n\nWe believe you're living in a setting where care is provided.\n\nSpeak to a member of staff where you live about getting the RSV vaccine.",
            "Priority": 520,
            "AttributeLevel": "PERSON",
            "AttributeName": "DE_FLAG",
            "Operator": "=",
            "Comparator": "Y",
            "CohortLabel": "rsv_80_since_02_Sept_2024",
            "RuleStop": "Y"
          },
          {
            "Type": "S",
            "Name": "Other Setting",
            "Description": "## Getting the vaccine\n\nWe believe you're living in a setting where care is provided.\n\nSpeak to a member of staff where you live about getting the RSV vaccine.",
            "Priority": 530,
            "AttributeLevel": "PERSON",
            "AttributeName": "13Q_FLAG",
            "Operator": "=",
            "Comparator": "Y",
            "CohortLabel": "rsv_80_since_02_Sept_2024",
            "RuleStop": "Y"
          },
          {
            "Type": "S",
            "Name": "Other Setting",
            "Description": "## Getting the vaccine\n\nWe believe you're living in a setting where care is provided.\n\nSpeak to a member of staff where you live about getting the RSV vaccine.",
            "Priority": 540,
            "AttributeLevel": "PERSON",
            "AttributeName": "CARE_HOME_FLAG",
            "Operator": "=",
            "Comparator": "Y",
            "CohortLabel": "rsv_75to79",
            "RuleStop": "Y"
          },
          {
            "Type": "S",
            "Name": "Other Setting with no future booking",
            "Description": "## Getting the vaccine\n\nWe believe you're living in a setting where care is provided.\n\nSpeak to a member of staff where you live about getting the RSV vaccine.",
            "Priority": 550,
            "AttributeLevel": "PERSON",
            "AttributeName": "DE_FLAG",
            "Operator": "=",
            "Comparator": "Y",
            "CohortLabel": "rsv_75to79",
            "RuleStop": "Y"
          },
          {
            "Type": "S",
            "Name": "Other Setting",
            "Description": "## Getting the vaccine\n\nWe believe you're living in a setting where care is provided.\n\nSpeak to a member of staff where you live about getting the RSV vaccine.",
            "Priority": 560,
            "AttributeLevel": "PERSON",
            "AttributeName": "13Q_FLAG",
            "Operator": "=",
            "Comparator": "Y",
            "CohortLabel": "rsv_75to79",
            "RuleStop": "Y"
          },
          {
            "Type": "R",
            "Name": "Actionable Future Booked NBS Appointment",
            "Description": "Amend NBS future booking",
            "Priority": 1000,
            "Operator": "D>=",
            "Comparator": "0",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "BOOKED_APPOINTMENT_DATE",
            "CommsRouting": "AMEND_NBS"
          },
          {
            "Type": "R",
            "Name": "Actionable Future Booked NBS Appointment",
            "Description": "Amend NBS future booking",
            "Priority": 1000,
            "Operator": "=",
            "Comparator": "NBS",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "BOOKED_APPOINTMENT_PROVIDER",
            "CommsRouting": "AMEND_NBS"
          },
          {
            "Type": "R",
            "Name": "Actionable Future Booked Local Appointment",
            "Description": "Amend local future booking",
            "Priority": 1100,
            "Operator": "D>=",
            "Comparator": "0",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "BOOKED_APPOINTMENT_DATE",
            "CommsRouting": "MANAGE_LOCAL"
          },
          {
            "Type": "R",
            "Name": "Within CP Expansion ICB",
            "Description": "Book an appointment on NBS as within CP expansion",
            "Priority": 1200,
            "Operator": "in",
            "Comparator": "QH8,QJG",
            "AttributeLevel": "PERSON",
            "AttributeName": "ICB",
            "CommsRouting": "BOOK_LOCAL|BOOK_NBS|HELP_SUPPORT"
          },
          {
            "Type": "R",
            "Name": "Within CP Expansion ICB not 80 plus",
            "Description": "Book an appointment on NBS as within CP expansion",
            "Priority": 1200,
            "AttributeLevel": "PERSON",
            "AttributeName": "DATE_OF_BIRTH",
            "Operator": "Y>",
            "Comparator": "-80",
            "CommsRouting": "BOOK_LOCAL|BOOK_NBS|HELP_SUPPORT"
          },
          {
            "Type": "R",
            "Name": "Within CP Expansion Local Authority",
            "Description": "Book an appointment on NBS as within CP expansion",
            "Priority": 1300,
            "Operator": "in",
            "Comparator": "E08000028,E08000031,E08000025,E06000016,E06000008,E07000117,E07000120,E08000011,E08000012,E07000122,E07000123,E08000014,E07000126,E08000013,E07000127,E08000015,E07000128",
            "AttributeLevel": "PERSON",
            "AttributeName": "LOCAL_AUTHORITY",
            "CommsRouting": "BOOK_LOCAL|BOOK_NBS|HELP_SUPPORT"
          },
          {
            "Type": "R",
            "Name": "Within CP Expansion ICB not 80 plus",
            "Description": "Book an appointment on NBS as within CP expansion",
            "Priority": 1300,
            "AttributeLevel": "PERSON",
            "AttributeName": "DATE_OF_BIRTH",
            "Operator": "Y>",
            "Comparator": "-80",
            "CommsRouting": "BOOK_LOCAL|BOOK_NBS|HELP_SUPPORT"
          },
          {
            "Type": "Y",
            "Name": "Already vaccinated default text",
            "Description": "Already vaccinated default text",
            "Priority": 3000,
            "AttributeLevel": "TARGET",
            "AttributeTarget": "RSV",
            "AttributeName": "LAST_SUCCESSFUL_DATE",
            "Operator": "Y>=",
            "Comparator": "-25",
            "CommsRouting": "CHECK_CORRECT_ALREADY_VACCINATED"
          },
          {
            "Type": "Y",
            "Name": "Other setting default text",
            "Description": "Other setting default text",
            "Priority": 3100,
            "AttributeLevel": "PERSON",
            "AttributeName": "CARE_HOME_FLAG",
            "Operator": "=",
            "Comparator": "Y",
            "CommsRouting": "CHECK_CORRECT_OTHER_SETTING"
          },
          {
            "Type": "Y",
            "Name": "Other setting default text",
            "Description": "Other setting default text",
            "Priority": 3200,
            "AttributeLevel": "PERSON",
            "AttributeName": "DE_FLAG",
            "Operator": "=",
            "Comparator": "Y",
            "CommsRouting": "CHECK_CORRECT_OTHER_SETTING"
          },
          {
            "Type": "Y",
            "Name": "Other setting default text",
            "Description": "Other setting default text",
            "Priority": 3300,
            "AttributeLevel": "PERSON",
            "AttributeName": "13Q_FLAG",
            "Operator": "=",
            "Comparator": "Y",
            "CommsRouting": "CHECK_CORRECT_OTHER_SETTING"
          }
        ],
        "ActionsMapper": {
          "BOOK_NBS": {
            "ExternalRoutingCode": "BookNBS",
            "ActionDescription": "",
            "ActionType": "ButtonWithAuthLink",
            "UrlLink": "http://www.nhs.uk/book-rsv",
            "UrlLabel": "Continue to booking"
          },
          "AMEND_NBS": {
            "ExternalRoutingCode": "AmendNBS",
            "ActionDescription": "##You have an RSV vaccination appointment\nYou can view, change or cancel your appointment below.",
            "ActionType": "ButtonWithAuthLink",
            "UrlLink": "http://www.nhs.uk/book-rsv",
            "UrlLabel": "Manage your appointment"
          },
          "CONTACT_GP": {
            "ExternalRoutingCode": "ContactGP",
            "ActionDescription": "Contact your GP",
            "ActionType": "InfoText",
            "UrlLink": null,
            "UrlLabel": ""
          },
          "BOOK_LOCAL": {
            "ExternalRoutingCode": "BookLocal",
            "ActionDescription": "##Getting the vaccine\n\nYou can get an RSV vaccination at your GP surgery.\nYour GP surgery may contact you about getting the RSV vaccine. This may be by letter, text, phone call, email or through the NHS App. You do not need to wait to be contacted before booking your vaccination.",
            "ActionType": "InfoText",
            "UrlLink": null,
            "UrlLabel": ""
          },
          "MANAGE_LOCAL": {
            "ExternalRoutingCode": "ManageLocal",
            "ActionDescription": "##You have an RSV vaccination appointment\n\nContact your healthcare provider to change or cancel your appointment.",
            "ActionType": "CardWithText",
            "UrlLink": null,
            "UrlLabel": ""
          },
          "HELP_SUPPORT": {
            "ExternalRoutingCode": "HelpSupportInfo",
            "ActionDescription": "## CONTENT TBC\n\nBlah blah blah.",
            "ActionType": "InfoText",
            "UrlLink": null,
            "UrlLabel": ""
          },
          "CHECK_CORRECT_X": {
            "ExternalRoutingCode": "HealthcareProInfo",
            "ActionDescription": "## If you think this is incorrect\n\nSpeak to your healthcare professional if you think you should be offered this vaccine.\n\nFor anything else, visit our help and support page. (ADD LINK)",
            "ActionType": "InfoText",
            "UrlLink": null,
            "UrlLabel": ""
          },
          "CHECK_CORRECT_ALREADY_VACCINATED": {
            "ExternalRoutingCode": "AlreadyVaccinatedInfo",
            "ActionDescription": "## If you think this is incorrect\n\nIf you believe you've not been vaccinated against RSV, speak to your healthcare professional.\n\nFor anything else please see our help and support page. (ADD LINK).",
            "ActionType": "InfoText",
            "UrlLink": null,
            "UrlLabel": ""
          },
          "CHECK_CORRECT_OTHER_SETTING": {
            "ExternalRoutingCode": "ManagedSettingInfo",
            "ActionDescription": "## If you think this is incorrect\n\nIf you have already had this vaccination or your personal details are wrong, visit our help and support page. (ADD LINK).",
            "ActionType": "InfoText",
            "UrlLink": null,
            "UrlLabel": ""
          }
        }
      }
    ]
  }
}
