{
  "CampaignConfig": {
    "ID": "<<RANDOM_GUID>>",
    "Version": 1,
    "Name": "ELI-222 - Implement magic cohort",
    "Type": "V",
    "Target": "RSV",
    "Manager": [
      "person1@nhs.net"
    ],
    "Approver": [
      "person1@nhs.net"
    ],
    "Reviewer": [
      "person1@nhs.net"
    ],
    "IterationFrequency": "X",
    "IterationType": "O",
    "IterationTime": "07:00:00",
    "DefaultCommsRouting": "CONTACT_GP",
    "StartDate": "20250601",
    "EndDate": "20260601",
    "ApprovalMinimum": 0,
    "ApprovalMaximum": 0,
    "Iterations": [
      {
        "ID": ",<<RANDOM_GUID>>",
        "DefaultCommsRouting": "CONTACT_GP",
        "Version": 1,
        "Name": "ELI-222 - Implement magic cohort",
        "IterationDate": "20250601",
        "IterationNumber": 1,
        "CommsType": "I",
        "DefaultNotEligibleRouting": "",
        "DefaultNotActionableRouting": "",
        "ApprovalMinimum": 0,
        "ApprovalMaximum": 0,
        "Type": "O",
        "IterationCohorts": [
          {
            "CohortLabel": "rsv_75to79",
            "CohortGroup": "rsv_age",
            "PositiveDescription": "are aged 75 to 79 years old.",
            "NegativeDescription": "are not aged 75 to 79 years old.",
            "Priority": 0
          },
          {
            "CohortLabel": "rsv_80_since_02_Sept_2024",
            "CohortGroup": "rsv_age_catchup",
            "PositiveDescription": "turned 80 after 1st September 2024",
            "NegativeDescription": "did not turn 80 after 1 September 2024",
            "Priority": 10
          },
          {
            "CohortLabel": "elid_all_people",
            "CohortGroup": "magic_cohort",
            "PositiveDescription": "",
            "NegativeDescription": "",
            "Priority": 20
          }
        ],
        "IterationRules": [
          {
            "Type": "F",
            "Name": "Assure only already vaccinated or those with a future booking are included in magic cohort",
            "Description": "Exclude anyone who has NOT been given a dose of RSV Vaccination from the magic cohort",
            "Operator": "is_empty",
            "Comparator": "",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "LAST_SUCCESSFUL_DATE",
            "CohortLabel": "elid_all_people",
            "Priority": 100
          },
          {
            "Type": "F",
            "Name": "Assure only already vaccinated or those with a future booking are included in magic cohort",
            "Description": "Exclude anyone from the magic cohort who does not have a future booking",
            "Operator": "D<",
            "Comparator": "0",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "BOOKED_APPOINTMENT_DATE",
            "CohortLabel": "elid_all_people",
            "Priority": 100
          },
          {
            "Type": "F",
            "Name": "Assure only already vaccinated or those with a future booking are included in magic cohort",
            "Description": "Exclude anyone from the magic cohort who does not have a future booking",
            "Operator": "is_empty",
            "Comparator": "",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "BOOKED_APPOINTMENT_DATE",
            "CohortLabel": "elid_all_people",
            "Priority": 110
          },
          {
            "Type": "F",
            "Name": "Assure only already vaccinated or those with a future booking are included in magic cohort",
            "Description": "Exclude anyone who has NOT been given a dose of RSV Vaccination from the magic cohort",
            "Operator": "is_empty",
            "Comparator": "",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "LAST_SUCCESSFUL_DATE",
            "CohortLabel": "elid_all_people",
            "Priority": 110
          },
          {
            "Type": "F",
            "Name": "Filter those with incorrect age from rsv_75to79 cohort",
            "Description": "Filter those with incorrect age from rsv_75to79 cohort",
            "Operator": "Y>",
            "Comparator": "-75",
            "AttributeLevel": "PERSON",
            "AttributeName": "DATE_OF_BIRTH",
            "CohortLabel": "rsv_75to79",
            "Priority": 120
          },
          {
            "Type": "S",
            "Name": "Already Vaccinated",
            "Description": "##You've had your RSV vaccination\nWe believe you had your vaccination.",
            "Priority": 200,
            "AttributeLevel": "TARGET",
            "AttributeTarget": "RSV",
            "AttributeName": "LAST_SUCCESSFUL_DATE",
            "Operator": "Y>=",
            "Comparator": "-25",
            "RuleStop": "Y"
          },
          {
            "Type": "R",
            "Name": "Actionable Future Booked Appointment",
            "Description": "Actionable Future Booked Appointment",
            "Priority": 1030,
            "Operator": ">=",
            "Comparator": "0",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "BOOKED_APPOINTMENT_DATE",
            "CommsRouting": "AMEND_NBS"
          },
          {
            "Type": "R",
            "Name": "Actionable Future Booked Appointment",
            "Description": "Actionable Future Booked Appointment",
            "Priority": 1030,
            "Operator": "=",
            "Comparator": "NBS",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "BOOKED_APPOINTMENT_PROVIDER",
            "CommsRouting": "AMEND_NBS"
          },
          {
            "Type": "R",
            "Name": "Actionable Future Booked Appointment",
            "Description": "Actionable Future Booked Appointment",
            "Priority": 1040,
            "Operator": ">=",
            "Comparator": "0",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "BOOKED_APPOINTMENT_DATE",
            "CommsRouting": "MANAGE_LOCAL"
          },
          {
            "Type": "R",
            "Name": "Actionable Future Booked Appointment",
            "Description": "Actionable Future Booked Appointment",
            "Priority": 1040,
            "Operator": "!=",
            "Comparator": "NBS",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "BOOKED_APPOINTMENT_PROVIDER",
            "CommsRouting": "MANAGE_LOCAL"
          }
        ],
        "ActionsMapper": {
          "AMEND_NBS": {
            "ExternalRoutingCode": "AmendNBS",
            "ActionDescription": "##You have an RSV vaccination appointment\\nYou can view, change or cancel your appointment below.",
            "ActionType": "ButtonWithAuthLink",
            "UrlLink": "http://www.nhs.uk/book-rsv",
            "UrlLabel": "Manage your appointment"
          },
          "MANAGE_LOCAL": {
            "ExternalRoutingCode": "ManageLocal",
            "ActionDescription": "##You have an RSV vaccination appointment\nContact your healthcare provider to change or cancel your appointment.",
            "ActionType": "CardWithText",
            "UrlLink": null,
            "UrlLabel": ""
          }
        }
      }
    ]
  }
}
