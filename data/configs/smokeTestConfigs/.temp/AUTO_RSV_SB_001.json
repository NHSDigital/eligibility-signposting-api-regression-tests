{
  "CampaignConfig": {
    "ID": "<<RANDOM_GUID>>",
    "Version": 1,
    "Name": "Automation RSV - Smoke Test Config",
    "Type": "V",
    "Target": "RSV",
    "Manager": [
      "person1@nhs.net"
    ],
    "Approver": [
      "person1@nhs.net"
    ],
    "Reviewer": [
      "person1@nhs.net"
    ],
    "IterationFrequency": "X",
    "IterationType": "O",
    "IterationTime": "07:00:00",
    "DefaultCommsRouting": "BOOK_LOCAL",
    "StartDate": "20250601",
    "EndDate": "20260601",
    "ApprovalMinimum": 0,
    "ApprovalMaximum": 0,
    "Iterations": [
      {
        "ID": ",<<RANDOM_GUID>>",
        "DefaultCommsRouting": "BOOK_LOCAL",
        "Version": 1,
        "Name": "Automation RSV - Smoke Test Config Iteration",
        "IterationDate": "20250601",
        "IterationNumber": 1,
        "CommsType": "I",
        "ApprovalMinimum": 0,
        "ApprovalMaximum": 0,
        "Type": "M",
        "IterationCohorts": [
          {
            "CohortLabel": "rsv_75_rolling",
            "CohortGroup": "rsv_age_rolling",
            "PositiveDescription": "are aged 75 to 79 years old.",
            "NegativeDescription": "are not aged 75 to 79 years old.",
            "Priority": 0
          },
          {
            "CohortLabel": "rsv_75to79_2024",
            "CohortGroup": "rsv_age_catchup",
            "PositiveDescription": "turned 80 between 2nd September 2024 and 31st August 2025",
            "NegativeDescription": "did not turn 80 after 1 September 2024 and get vaccinated by 31 August 2025",
            "Priority": 10
          },
          {
            "CohortLabel": "elid_all_people",
            "CohortGroup": "elid_all_people",
            "PositiveDescription": "",
            "NegativeDescription": "",
            "Priority": 20
          },
          {
            "CohortLabel": "no_group_description",
            "CohortGroup": "",
            "PositiveDescription": "",
            "NegativeDescription": "",
            "Priority": 30
          }
        ],
        "IterationRules": [
          {
            "Type": "F",
            "Name": "Assure only already vaccinated taken from magic cohort",
            "Description": "Exclude anyone who has NOT been given a dose of RSV Vaccination from the magic cohort",
            "Operator": "is_empty",
            "Comparator": "",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "LAST_SUCCESSFUL_DATE",
            "CohortLabel": "elid_all_people",
            "Priority": 100
          },
          {
            "Type": "F",
            "Name": "Under Age - Under 75 Years on day of execution",
            "Description": "Ensure anyone who has a PDS date of birth which determines their age to be less than 75 years is filtered out.",
            "Priority": 120,
            "AttributeLevel": "PERSON",
            "AttributeName": "DATE_OF_BIRTH",
            "Operator": "Y>",
            "Comparator": "-75"
          },
          {
            "Type": "F",
            "Name": "Exclude Too OLD",
            "Description": "Exclude anyone over 80",
            "Priority": 130,
            "AttributeLevel": "PERSON",
            "AttributeName": "DATE_OF_BIRTH",
            "Operator": "<",
            "Comparator": "-80"
          },
          {
            "Type": "S",
            "Name": "AlreadyVaccinated",
            "Description": "##You've had your RSV vaccination\nWe believe you had your vaccination on <<LAST_SUCCESSFUL_DATE>>.",
            "Priority": 550,
            "AttributeLevel": "TARGET",
            "AttributeTarget": "RSV",
            "AttributeName": "LAST_SUCCESSFUL_DATE",
            "Operator": "Y>=",
            "Comparator": "-25",
            "RuleStop": "Y"
          },
          {
            "Type": "S",
            "Name": "NotAvailable",
            "Description": "NotAvailable|Vaccinations are not currently available.",
            "Priority": 510,
            "AttributeLevel": "PERSON",
            "AttributeName": "ICB",
            "Operator": "=",
            "Comparator": "SUPPRESSED_ICB",
            "RuleStop": "Y"
          },
          {
            "Type": "S",
            "Name": "NotYetDue",
            "Description": "NotYetDue|Your next dose is not yet due.",
            "Priority": 520,
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "LAST_SUCCESSFUL_DATE",
            "Operator": "=",
            "Comparator": "<<DATE_DAY_-100>>",
            "RuleStop": "Y"
          },
          {
            "Type": "S",
            "Name": "TooClose",
            "Description": "TooClose|Your previous vaccination was less than 91 days ago.",
            "Priority": 530,
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "LAST_SUCCESSFUL_DATE",
            "Operator": "D>",
            "Comparator": "<<DATE_DAY_-91>>",
            "RuleStop": "Y"
          },
          {
            "Type": "S",
            "Name": "TooClose",
            "Description": "TooClose|Your previous vaccination was less than 91 days ago.",
            "Priority": 530,
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "LAST_SUCCESSFUL_DATE",
            "Operator": "D<",
            "Comparator": "<<DATE_DAY_-91>>",
            "RuleStop": "Y"
          },
          {
            "Type": "S",
            "Name": "OtherSetting",
            "Description": "OtherSetting|## Getting the vaccine\nOur record show you're living in a setting where care is provided.\nIf you think you should have the RSV vaccine, speak to a member of staff where you live.",
            "Priority": 540,
            "AttributeLevel": "PERSON",
            "AttributeName": "CARE_HOME_FLAG",
            "Operator": "=",
            "Comparator": "Y"
          },
          {
            "Type": "R",
            "Name": "Actionable Not Vaccinated",
            "Description": "Book An Appointment",
            "Priority": 1010,
            "Operator": "is_empty",
            "Comparator": "",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "LAST_SUCCESSFUL_DATE",
            "CommsRouting": "BOOK_NBS"
          },
          {
            "Type": "R",
            "Name": "Actionable Not Vaccinated",
            "Description": "Book An Appointment",
            "Priority": 1010,
            "Operator": "=",
            "Comparator": "LS2",
            "AttributeLevel": "PERSON",
            "AttributeName": "POSTCODE_SECTOR",
            "CommsRouting": "BOOK_NBS"
          },
          {
            "Type": "R",
            "Name": "Actionable Future Booked Appointment",
            "Description": "Actionable Future Booked Appointment",
            "Priority": 1020,
            "Operator": ">=",
            "Comparator": "0",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "BOOKED_APPOINTMENT_DATE",
            "CommsRouting": "AMEND_NBS"
          },
          {
            "Type": "R",
            "Name": "Actionable Future Booked Appointment",
            "Description": "Actionable Future Booked Appointment",
            "Priority": 1020,
            "Operator": "=",
            "Comparator": "NBS",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "BOOKED_APPOINTMENT_PROVIDER",
            "CommsRouting": "AMEND_NBS"
          },
          {
            "Type": "R",
            "Name": "Actionable Future Booked Appointment",
            "Description": "Actionable Future Booked Appointment",
            "Priority": 1030,
            "Operator": ">=",
            "Comparator": "0",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "BOOKED_APPOINTMENT_DATE",
            "CommsRouting": "MANAGE_LOCAL"
          },
          {
            "Type": "R",
            "Name": "Actionable Future Booked Appointment",
            "Description": "Actionable Future Booked Appointment",
            "Priority": 1030,
            "Operator": "!=",
            "Comparator": "NBS",
            "AttributeTarget": "RSV",
            "AttributeLevel": "TARGET",
            "AttributeName": "BOOKED_APPOINTMENT_PROVIDER",
            "CommsRouting": "MANAGE_LOCAL"
          }
        ],
        "ActionsMapper": {
          "BOOK_NBS": {
            "ExternalRoutingCode": "BookNBS",
            "ActionDescription": "",
            "ActionType": "ButtonWithAuthLink",
            "UrlLink": "http://www.nhs.uk/book-rsv",
            "UrlLabel": "Continue to booking"
          },
          "AMEND_NBS": {
            "ExternalRoutingCode": "AmendNBS",
            "ActionDescription": "##You have an RSV vaccination appointment\nYou can view, change or cancel your appointment below.",
            "ActionType": "ButtonWithAuthLink",
            "UrlLink": "http://www.nhs.uk/book-rsv",
            "UrlLabel": "Manage your appointment"
          },
          "CONTACT_GP": {
            "ExternalRoutingCode": "ContactGP",
            "ActionDescription": "Contact your GP",
            "ActionType": "InfoText",
            "UrlLink": "",
            "UrlLabel": ""
          },
          "BOOK_LOCAL": {
            "ExternalRoutingCode": "BookLocal",
            "ActionDescription": "##Getting the vaccine\nYou can get an RSV vaccination at your GP surgery.\nYour GP surgery may contact you about getting the RSV vaccine. This may be by letter, text, phone call, email or through the NHS App. You do not need to wait to be contacted before booking your vaccination.",
            "ActionType": "InfoText",
            "UrlLink": "",
            "UrlLabel": ""
          },
          "MANAGE_LOCAL": {
            "ExternalRoutingCode": "ManageLocal",
            "ActionDescription": "##You have an RSV vaccination appointment\nContact your healthcare provider to change or cancel your appointment.",
            "ActionType": "CardWithText",
            "UrlLink": "",
            "UrlLabel": ""
          },
          "CHECK_CORRECT": {
            "ExternalRoutingCode": "CheckCorrect",
            "ActionDescription": "##If you think this is incorrect\\nIf you have not had this vaccination and you think you should, speak to your healthcare professional.",
            "ActionType": "InfoText",
            "UrlLink": "",
            "UrlLabel": ""
          }
        }
      }
    ]
  }
}
