{
	"CampaignConfig": {
		"ID": "7fcb742b-45fa-4w0d-8f2f-9c2efb1f46d1",
		"Version": 1,
		"Name": "EliD NBS RSV example config",
		"Type": "V",
		"Target": "RSV",
		"Manager": ["example@nhs.net"],
		"Approver": ["example@nhs.net"],
		"Reviewer": ["example@nhs.net"],
		"IterationFrequency": "X",
		"IterationType": "O",
		"IterationTime": "07:00:00",
		"StartDate": "20260401",
		"EndDate": "20350401",
		"ApprovalMinimum": 0,
		"ApprovalMaximum": 0,
		"DefaultCommsRouting": "PLACEHOLDER_COMMS_ROUTING",
		"Iterations": [
			{
				"ID": "2pcb742b-45ya-9e0d-8p2p-9c0epb1p46d1",
				"DefaultCommsRouting": "BOOK_NBS",
				"DefaultNotActionableRouting": "",
				"DefaultNotEligibleRouting": "",
				"Version": 1,
				"Name": "EliD NBS RSV example config",
				"IterationDate": "20260401",
				"IterationNumber": 1,
				"CommsType": "I",
				"ApprovalMinimum": 0,
				"ApprovalMaximum": 0,
				"Type": "O",
				"StatusText": {
                              			"NotEligible": "We do not believe you can have it",
                              			"NotActionable": "You should have the RSV vaccine",
                              			"Actionable": "You should have the RSV vaccine"
                              		      },
				"IterationCohorts": [
					{
						"CohortLabel": "rsv_75+_plus1day",
						"CohortGroup": "rsv_age",
						"PositiveDescription": "are aged 75 or over",
						"NegativeDescription": "are not aged 75 or over",
						"Priority": 0,
                        "Virtual": "N"
					},
					{
						"CohortLabel": "care_home_residents_older_adults",
						"CohortGroup": "rsv_care_home_residents",
						"PositiveDescription": "live in a care home for older adults",
						"NegativeDescription": "do not live in a care home for older adults",
						"Priority": 10,
                		"Virtual": "N"
					},
					{
						"CohortLabel": "elid_all_people",
						"CohortGroup": "magic_cohort",
						"PositiveDescription": "",
						"NegativeDescription": "",
						"Priority": 20,
                       	"Virtual": "Y"
					}
				],
				"IterationRules": [
					{
						"Type": "F",
						"Name": "Remove from magic cohort unless already vaccinated or have future booking",
						"Description": "Remove anyone NOT already vaccinated within the last 25 years and do not have a future booking from the magic cohort",
						"Operator": "Y<=",
						"Comparator": "-25[[NVL:18000101]]",
						"AttributeTarget": "RSV",
						"AttributeLevel": "TARGET",
						"AttributeName": "LAST_SUCCESSFUL_DATE",
						"CohortLabel": "elid_all_people",
						"Priority": 100
					},
					{
						"Type": "F",
						"Name": "Remove from magic cohort unless already vaccinated or have future booking",
						"Description": "Remove anyone without a future booking from magic cohort",
						"Operator": "D<",
						"Comparator": "0[[NVL:18000101]]",
						"AttributeTarget": "RSV",
						"AttributeLevel": "TARGET",
						"AttributeName": "BOOKED_APPOINTMENT_DATE",
						"CohortLabel": "elid_all_people",
						"Priority": 100
					},
					{
						"Type": "F",
						"Name": "Remove under 75 Years on day of execution",
						"Description": "Ensure anyone who has a PDS date of birth which determines their age to be less than 75 years is filtered out.",
						"Priority": 120,
						"AttributeLevel": "PERSON",
						"AttributeName": "DATE_OF_BIRTH",
						"Operator": "Y>",
						"Comparator": "-75",
						"CohortLabel": "rsv_75+_plus1day"
					},
					{
						"Type": "F",
						"Name": "Remove from rsv age and care home residents eligible cohorts if already vaccinated",
						"Description": "Remove anyone already vaccinated from eligible cohorts",
						"Operator": "Y>=",
						"Comparator": "-25",
						"AttributeTarget": "RSV",
						"AttributeLevel": "TARGET",
						"AttributeName": "LAST_SUCCESSFUL_DATE",
						"CohortLabel": "rsv_75+_plus1day,care_home_residents_older_adults",
						"Priority": 160
					},
					{
						"Type": "F",
						"Name": "Remove from rsv age and care home residents eligible cohorts if future booking",
						"Description": "Remove anyone with a future booking from eligible cohorts",
						"Operator": "D>=",
						"Comparator": "0",
						"AttributeTarget": "RSV",
						"AttributeLevel": "TARGET",
						"AttributeName": "BOOKED_APPOINTMENT_DATE",
						"CohortLabel": "rsv_75+_plus1day,care_home_residents_older_adults",
						"Priority": 170
					},
                      {
						"Type": "F",
						"Name": "Under75Vaccinated28Weeks+",
						"Description": "Under 75 years old and vaccinated more than 28 weeks ago",
						"Priority": 190,
						"AttributeLevel": "TARGET",
						"AttributeTarget": "RSV",
						"AttributeName": "LAST_SUCCESSFUL_DATE",
						"Operator": "D<",
						"Comparator": "-196",
						"CohortLabel": "elid_all_people",
                        "RuleStop": "Y"
					},
                    {
						"Type": "F",
						"Name": "Under75Vaccinated28Weeks+",
						"Description": "Under 75 years old and vaccinated more than 28 weeks ago",
						"Priority": 190,
						"AttributeLevel": "PERSON",
						"AttributeName": "DATE_OF_BIRTH",
						"Operator": "Y>",
						"Comparator": "-75",
						"CohortLabel": "elid_all_people",
                        "RuleStop": "Y"
					},
                    {
						"Type": "F",
						"Name": "Under75Vaccinated28Weeks+",
						"Description": "Under 75 years old and vaccinated more than 28 weeks ago",
						"Priority": 190,
						"AttributeLevel": "COHORT",
						"AttributeName": "COHORT_LABEL",
						"Operator": "NotaMemberOf",
						"Comparator": "care_home_residents_older_adults",
						"CohortLabel": "elid_all_people",
                        "RuleStop": "Y"
					},
                    {
						"Type": "S",
						"Name": "Under75VaccinatedInPast28Weeks",
						"Description": "Under 75 years old and vaccinated within the past 28 weeks",
						"Priority": 190,
						"AttributeLevel": "TARGET",
						"AttributeTarget": "RSV",
						"AttributeName": "LAST_SUCCESSFUL_DATE",
						"Operator": "D>=",
						"Comparator": "-196",
						"CohortLabel": "elid_all_people",
                        "RuleStop": "Y"
					},
                    {
						"Type": "S",
						"Name": "Under75VaccinatedInPast28Weeks",
						"Description": "Under 75 years old and vaccinated within the past 28 weeks",
						"Priority": 190,
						"AttributeLevel": "PERSON",
						"AttributeName": "DATE_OF_BIRTH",
						"Operator": "Y>",
						"Comparator": "-75",
						"CohortLabel": "elid_all_people",
                        "RuleStop": "Y"
					},
                    {
						"Type": "S",
						"Name": "Under75VaccinatedInPast28Weeks",
						"Description": "Under 75 years old and vaccinated within the past 28 weeks",
						"Priority": 190,
						"AttributeLevel": "COHORT",
						"AttributeName": "COHORT_LABEL",
						"Operator": "NotaMemberOf",
						"Comparator": "care_home_residents_older_adults",
						"CohortLabel": "elid_all_people",
                        "RuleStop": "Y"
					},
					{
						"Type": "S",
						"Name": "AlreadyVaccinated",
						"Description": "AlreadyVaccinated",
						"Priority": 200,
						"AttributeLevel": "TARGET",
						"AttributeTarget": "RSV",
						"AttributeName": "LAST_SUCCESSFUL_DATE",
						"Operator": "Y>=",
						"Comparator": "-25",
						"RuleStop": "Y"
					},
					{
						"Type": "S",
						"Name": "Future Booked NBS Appointment",
						"Description": "NBS future booking",
						"Priority": 210,
						"Operator": "D>=",
						"Comparator": "0",
						"AttributeTarget": "RSV",
						"AttributeLevel": "TARGET",
						"AttributeName": "BOOKED_APPOINTMENT_DATE",
                        "RuleStop": "Y"
					},
					{
						"Type": "S",
						"Name": "Future Booked NBS Appointment",
						"Description": "NBS future booking",
						"Priority": 210,
						"Operator": "in",
						"Comparator": "NBS,MYA",
						"AttributeTarget": "RSV",
						"AttributeLevel": "TARGET",
						"AttributeName": "BOOKED_APPOINTMENT_PROVIDER",
                        "RuleStop": "Y"
					},
					{
						"Type": "S",
						"Name": "Future Booked Local Appointment",
						"Description": "Local future booking",
						"Priority": 220,
						"Operator": "D>=",
						"Comparator": "0",
						"AttributeTarget": "RSV",
						"AttributeLevel": "TARGET",
						"AttributeName": "BOOKED_APPOINTMENT_DATE",
                        "RuleStop": "Y"
					},
					{
						"Type": "X",
						"Name": "Under 75 and vaccinated more than 28 weeks ago",
						"Description": "Under 75 and vaccinated in the past 28 weeks",
						"Priority": 2000,
						"AttributeLevel": "TARGET",
						"AttributeTarget": "RSV",
						"AttributeName": "LAST_SUCCESSFUL_DATE",
						"Operator": "D<",
						"Comparator": "-196",
                        "CommsRouting": "LAST_VACCINATION_DATE|EARLIEST_NEXT_VACCINATION_DATE"
					},
 		                        {
						"Type": "Y",
						"Name": "Under 75 and vaccinated in the past 28 weeks",
						"Description": "Under 75 and vaccinated in the past 28 weeks",
						"Priority": 3000,
						"AttributeLevel": "TARGET",
						"AttributeTarget": "RSV",
						"AttributeName": "LAST_SUCCESSFUL_DATE",
						"Operator": "D>=",
						"Comparator": "-196",
       			        "CommsRouting": "LAST_VACCINATION_DATE|EARLIEST_NEXT_VACCINATION_DATE"
					},
                                        {
						"Type": "Y",
						"Name": "Under 75 and vaccinated in the past 28 weeks",
						"Description": "Under 75 and vaccinated in the past 28 weeks",
						"Priority": 3000,
						"AttributeLevel": "PERSON",
						"AttributeName": "DATE_OF_BIRTH",
						"Operator": "Y>",
						"Comparator": "-75",
						"CommsRouting": "LAST_VACCINATION_DATE|EARLIEST_NEXT_VACCINATION_DATE"
					},
                                        {
						"Type": "Y",
						"Name": "Under 75 and vaccinated in the past 28 weeks",
						"Description": "Under 75 and vaccinated in the past 28 weeks",
						"Priority": 3000,
				                "AttributeLevel": "COHORT",
						"AttributeName": "COHORT_LABEL",
						"Operator": "NotaMemberOf",
						"Comparator": "care_home_residents_older_adults",
						"CommsRouting": "LAST_VACCINATION_DATE|EARLIEST_NEXT_VACCINATION_DATE"
					},
					{
						"Type": "Y",
						"Name": "LastVaccinationDate",
						"Description": "Last vaccination date",
						"Priority": 3100,
						"AttributeLevel": "TARGET",
						"AttributeTarget": "RSV",
						"AttributeName": "LAST_SUCCESSFUL_DATE",
						"Operator": "Y>=",
						"Comparator": "-25",
						"CommsRouting": "LAST_VACCINATION_DATE"
					},
                    {
						"Type": "Y",
						"Name": "FutureBookingDate",
						"Description": "Future booking date",
						"Priority": 3200,
						"AttributeLevel": "TARGET",
						"AttributeTarget": "RSV",
						"AttributeName": "BOOKED_APPOINTMENT_DATE",
						"Operator": "D>=",
						"Comparator": "0",
						"CommsRouting": "FUTURE_APPOINTMENT_DATE"
					}
				],
				"ActionsMapper": {
					"BOOK_NBS": {
						"ExternalRoutingCode": "BookNBS",
						"ActionDescription": "Eligible to try and book",
						"ActionType": "InfoText",
						"UrlLink": null,
						"UrlLabel": ""
					},
					"NOT_NBS": {
						"ExternalRoutingCode": "NotNBS",
						"ActionDescription": "Eligible outside of CP Expansion",
						"ActionType": "InfoText",
						"UrlLink": null,
						"UrlLabel": ""
					},
					"AMEND_NBS": {
						"ExternalRoutingCode": "AmendNBS",
						"ActionDescription": "Future NBS booking",
						"ActionType": "InfoText",
						"UrlLink": null,
						"UrlLabel": ""
					},
					"MANAGE_LOCAL": {
						"ExternalRoutingCode": "ManageLocal",
						"ActionDescription": "Future local booking",
						"ActionType": "InfoText",
						"UrlLink": null,
						"UrlLabel": ""
					},
					"LAST_VACCINATION_DATE": {
						"ExternalRoutingCode": "DateOfLastVaccination",
						"ActionDescription": "[[TARGET.RSV.LAST_SUCCESSFUL_DATE:DATE(%Y-%m-%d)]]",
						"ActionType": "DataValue",
						"UrlLink": null,
						"UrlLabel": ""
					},
                    "EARLIEST_NEXT_VACCINATION_DATE": {
						"ExternalRoutingCode": "DateOfNextEarliestVaccination",
						"ActionDescription": "[[TARGET.RSV.NEXT_DOSE_DUE:ADD_DAYS(196):DATE(%Y-%m-%d)]]",
						"ActionType": "DataValue",
						"UrlLink": null,
						"UrlLabel": ""
					},
                    "FUTURE_APPOINTMENT_DATE": {
						"ExternalRoutingCode": "FutureBookingDate",
						"ActionDescription": "[[TARGET.RSV.BOOKED_APPOINTMENT_DATE:DATE(%Y-%m-%d)]]",
						"ActionType": "DataValue",
						"UrlLink": null,
						"UrlLabel": ""
					}
				}
			}
		]
	}
}
